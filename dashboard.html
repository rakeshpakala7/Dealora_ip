<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Dealora</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* ... your embedded CSS ... (same as before) ... */
    /* You can copy your style rules here, or keep as in your old file */
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">
        <img src="images/logo.jpeg" alt="Dealora Logo" class="nav-logo">
        <span class="logo-text">Dealora</span>
      </div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="dashboard.html" class="active">Dashboard</a></li>
        <li><a href="cart.html">Cart (<span id="cart-count">0</span>)</a></li>
        <li><a href="#" onclick="logout()" class="logout-btn">Logout</a></li>
      </ul>
    </nav>
  </header>

  <section class="dashboard-section">
    <div class="dashboard-container">
      <aside class="sidebar">
        <div class="user-profile">
          <div class="avatar">ðŸ‘¤</div>
          <h3 id="user-name">User Name</h3>
          <p id="user-email">user@email.com</p>
        </div>
        <ul class="sidebar-menu">
          <li><a href="#" onclick="showSection('profile')" class="active">Profile</a></li>
          <li><a href="#" onclick="showSection('orders')">My Orders</a></li>
          <li><a href="#" onclick="showSection('wishlist')">Wishlist</a></li>
          <li><a href="#" onclick="showSection('settings')">Settings</a></li>
        </ul>
      </aside>

      <main class="dashboard-content">
        <!-- Profile Section -->
        <div id="profile" class="section active">
          <h2>My Profile</h2>
          <form id="profile-form">
            <div class="form-group">
              <label>Full Name</label>
              <input type="text" id="profile-name" placeholder="Your name" disabled>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="profile-email" placeholder="Your email" readonly>
            </div>
            <div class="form-group">
              <label>Phone</label>
              <input type="tel" id="profile-phone" placeholder="Your phone number" disabled>
            </div>
            <div class="form-group">
              <label>Address</label>
              <textarea id="profile-address" placeholder="Your address" disabled></textarea>
            </div>
            <button type="button" class="edit-btn" onclick="enableEdit()">Edit Profile</button>
            <button type="button" class="btn" id="save-btn" onclick="saveProfile()" disabled>Save Changes</button>
          </form>
        </div>

        <!-- Orders Section -->
        <div id="orders" class="section">
          <h2>My Orders</h2>
          <div id="orders-list">
            <!-- Orders will be dynamically loaded here -->
          </div>
        </div>

        <!-- Wishlist Section -->
        <div id="wishlist" class="section">
          <h2>My Wishlist</h2>
          <div id="wishlist-list">
            <p>Your wishlist is empty</p>
          </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="section">
          <h2>Settings</h2>
          <div class="settings-group">
            <label><input type="checkbox" id="notifications" checked> Receive Email Notifications</label>
          </div>
          <div class="settings-group">
            <label><input type="checkbox" id="newsletter" checked> Subscribe to Newsletter</label>
          </div>
          <div class="settings-group">
            <button class="btn danger" onclick="changePassword()">Change Password</button>
            <button class="btn danger" onclick="deleteAccount()">Delete Account</button>
          </div>
        </div>
      </main>
    </div>
  </section>

  <div id="notification" class="notification"></div>

  <!-- Orders and switching script -->
  <script>
    // Show section logic
    function showSection(section) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
      document.getElementById(section).classList.add('active');
      document.querySelector(`[onclick="showSection('${section}')"]`).classList.add('active');
      if (section === 'orders') loadOrders();
    }

    // Load orders from localStorage and display
    function loadOrders() {
      const orders = JSON.parse(localStorage.getItem('orders')) || [];
      const ordersContainer = document.getElementById('orders-list');
      if (orders.length === 0) {
        ordersContainer.innerHTML = `
          <div style="text-align:center; padding:40px;">
            <h3>No orders yet</h3>
            <a href="products.html" class="btn">Browse Products</a>
          </div>
        `;
        return;
      }

      ordersContainer.innerHTML = orders.map(order => `
        <div style="background:#1a1a1a; border-radius:10px; padding:20px; margin-bottom:20px;">
          <div style="display:flex; justify-content:space-between; margin-bottom:15px; padding-bottom:15px; border-bottom:1px solid #333;">
            <div>
              <h4 style="color:#00eaff; margin:0;">Order #${order.id}</h4>
              <p style="color:#888; font-size:14px; margin:5px 0;">Date: ${order.date}</p>
            </div>
            <div style="background:#ffa500; color:#000; padding:5px 15px; border-radius:20px; font-weight:bold; height:fit-content;">
              ${order.status}
            </div>
          </div>
          ${order.items.map(item => `
            <div style="display:flex; align-items:center; padding:10px 0; border-bottom:1px solid #2a2a2a;">
              <img src="${item.image}" style="width:60px; height:60px; border-radius:8px; margin-right:15px; object-fit:cover;">
              <div style="flex:1;">
                <h5 style="margin:0 0 5px 0;">${item.name}</h5>
                <p style="color:#888; margin:0; font-size:14px;">Qty: ${item.quantity} Ã— â‚¹${item.price.toLocaleString()}</p>
              </div>
              <div style="font-weight:bold; color:#00eaff;">â‚¹${(item.price * item.quantity).toLocaleString()}</div>
            </div>
          `).join('')}
          <div style="margin-top:15px; padding-top:15px; border-top:2px solid #00eaff;">
            <div style="display:flex; justify-content:space-between; margin:8px 0;">
              <span>Subtotal:</span><span>â‚¹${order.subtotal.toLocaleString()}</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin:8px 0;">
              <span>Tax (5%):</span><span>â‚¹${order.tax.toFixed(2)}</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin:8px 0;">
              <span>Shipping:</span><span>â‚¹${order.shipping}</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-top:10px; padding-top:10px; border-top:1px solid #333; font-weight:bold; font-size:18px; color:#00eaff;">
              <span>Total:</span><span>â‚¹${order.total.toLocaleString()}</span>
            </div>
          </div>
        </div>
      `).join('');
    }

    // OPTIONAL: If you want orders to always load on page open, un-comment below
    // window.addEventListener('load', loadOrders);
  </script>
</body>
</html>
